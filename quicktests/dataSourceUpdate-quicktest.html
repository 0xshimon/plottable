<html>
  <head>
    <title>DataSource Update Quicktest</title>
    <link rel="stylesheet" type="text/css" href="../../plottable.css">
    <script src="../bower_components/d3/d3.min.js"></script>
    <script src="../../plottable_multifile.js"></script>
    <script src="../../examples/exampleUtil.js"></script>
    <style>
      .plottable .axis line {
/*        stroke: black;
        opacity: 1;*/
      }
    </style>

    <script>
      var dataseries;
      var renderAreaD1;
      var ds;

      window.onload = function() {
        Plottable.Singleton.RenderController.enabled=false;
        var dataseries = makeRandomData(20, 0.3);
        // newData();

        xScale = new Plottable.Scale.Linear();
        xAxis = new Plottable.Axis.XAxis(xScale, "bottom");

        yScale = new Plottable.Scale.Linear();
        yAxis = new Plottable.Axis.YAxis(yScale, "left");

        ds = new Plottable.DataSource(dataseries);

        renderAreaD1 = new Plottable.Plot.Area(ds, xScale, yScale);
        renderAreaD1.animate(false);

        var fillAccessor = function() { return "steelblue"; }
        var fillAccessorTop = function() { return "pink"; }
        renderAreaD1.project("fill", fillAccessor)

        var gridlines = new Plottable.Component.Gridlines(xScale, yScale);
        var renderGroup = new Plottable.Component.Group([gridlines, renderAreaD1]);

        var chart = new Plottable.Template.StandardChart()
                        .center(renderGroup).xAxis(xAxis).yAxis(yAxis)
                        .renderTo("#areaRenderer-test");
      }

      function newData() {
      	var data = makeRandomData(20, Math.random());
        var maxY = d3.max(data.map(function(o) {
          return o.y;
        }));
        // console.log(maxY);
        // console.log(JSON.stringify(data));
        ds.data(data);
      }
    </script>
  </head>
  <body>
    <svg id="areaRenderer-test" width="480" height="320"></svg>
    <button onclick="newData()">new data</button>
  </body>

</html>
