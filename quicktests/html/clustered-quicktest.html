<html>
  <head>
    <title>Clustered Quicktest</title>
    <link rel="stylesheet" type="text/css" href="../../plottable.css">
    <script src="../../bower_components/d3/d3.min.js"></script>
    <script src="../../plottable.js"></script>
    <script src="../../examples/exampleUtil.js"></script>
    <style>
    </style>

    <script>
window.onload = function() {
  // Plottable.Core.RenderController.setRenderPolicy(new Plottable.Core.RenderController.RenderPolicy.Immediate)
data1 = [{name: "jon", y: 1, type: "q1"}, {name: "dan", y: 2, type: "q1"}, {name: "zoo", y: 1, type: "q1"}];
data2 = [{name: "jon", y: 2, type: "q2"}, {name: "dan", y: 4, type: "q2"}, {name: "zoo", y: 2, type: "q2"}];
data3 = [{name: "jon", y: 4, type: "q3"}, {name: "dan", y: 15, type: "q3"}, {name: "zoo", y: 15, type: "q3"}];

xScale = new Plottable.Scale.Ordinal().domain(["jon", "dan", "zoo"]);
yScale = new Plottable.Scale.Linear();
var colorScale = new Plottable.Scale.Color("10").domain(["q1", "q2", "q3"]);

var xAxis = new Plottable.Axis.Category(xScale, "bottom");
var yAxis = new Plottable.Axis.Numeric(yScale, "left");
clusteredBarRenderer = new Plottable.Plot.ClusteredBar(xScale, yScale)
  .addDataset("d1", data1)
  .addDataset("d2", data2)
  .addDataset("d3", data3)
  .project("x", "name", xScale)
  .project("y", "y", yScale)
  .project("fill", "type", colorScale)
  .project("type", "type")
  .project("yval", "y")

var center = clusteredBarRenderer.merge(new Plottable.Component.Legend(colorScale));

horizChart = new Plottable.Component.Table([
  [yAxis, center], [null, xAxis]
  ]).renderTo("svg");
}

    </script>
  </head>
  <body>
    <svg id="chart" width="600" height="400"></svg>
    <p />
  </body>

</html>