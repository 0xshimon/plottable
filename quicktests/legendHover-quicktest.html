<html>
  <head>
<<<<<<< HEAD
    <title>Legend Hover Quicktest</title>
=======
    <title>Legend Toggle Quicktest</title>
>>>>>>> 081f76742bb6f171b9e4e2d5b78f6fe8164e18de
    <link rel="stylesheet" type="text/css" href="../../plottable.css">
    <script src="../bower_components/d3/d3.min.js"></script>
    <script src="../../plottable.js"></script>
    <script src="../../examples/exampleUtil.js"></script>
    <style>
<<<<<<< HEAD
=======
        .not-selected circle {
            fill:#d3d3d3;
        }
>>>>>>> 081f76742bb6f171b9e4e2d5b78f6fe8164e18de
    </style>
    <script>

      window.onload = function() {
        var renderers = [];


        var colors = new Plottable.ColorScale("10").range();
        var numRenderers = 5;
<<<<<<< HEAD
        var names = ["aaa", "bbb", "ccc", "ddd", "eee"];
=======
        var names = ["bat", "cat", "mat", "rat", "pat"];
>>>>>>> 081f76742bb6f171b9e4e2d5b78f6fe8164e18de
        var colorScale = new Plottable.ColorScale();
        colorScale.range(colors);
        colorScale.domain(names);


        var xScale = new Plottable.LinearScale();
        var yScale = new Plottable.LinearScale();

        for (var i=0; i<numRenderers; i++) {
            var data = makeRandomData(20);
            var renderer = new Plottable.LineRenderer(data, xScale, yScale);
                renderers.push(renderer);
        }

        var cg = new Plottable.ComponentGroup();
        renderers.forEach(function(renderer, i) {
            renderer.project("stroke", function() { return colors[i]; });
            cg.merge(renderer);
        });

        var xAxis = new Plottable.XAxis(xScale, "bottom");
        var yAxis = new Plottable.YAxis(yScale, "left");

        var chart = new Plottable.Table([
                                  [yAxis, cg],
                                  [null,  xAxis]
                                ]);
        
<<<<<<< HEAD
        var legendLabel = new Plottable.TitleLabel("q");
        var legend = new Plottable.HoverLegend(colorScale,
            function (d) {
                if (d === undefined) {
                    for (var i = 0; i < numRenderers; i++) {
                        renderers[i].project("opacity", 1);
                    }
                } else {
                    var index = names.indexOf(d);
                    for (var i = 0; i < numRenderers; i++) {
                        if (index === i) {
                            continue;
                        }
                        renderers[i].project("opacity", .1);
                    }
                }
                cg._invalidateLayout();
=======
        var legendLabel = new Plottable.TitleLabel("fat");
        var legend = new Plottable.HoverLegend(colorScale,
            function (d) {
                cg.removeAll();
                if (d === undefined) {
                    for (var i = 0; i < numRenderers; i++){
                        cg.merge (renderers[i]);
                    }
                } else {
                    var index = names.indexOf(d);
                    cg.merge(renderers[index]);
                }
>>>>>>> 081f76742bb6f171b9e4e2d5b78f6fe8164e18de
            }
        );
        var legendTable = new Plottable.Table([[legendLabel], [legend]]); 

        var outerTable = new Plottable.Table([[chart, legendTable]]);
        outerTable.renderTo("#legend-hover-test");
      }
    </script>
  </head>
  <body>
    <svg id="legend-hover-test" width="480" height="320"></svg>
  </body>

</html>
