<html>
  <head>
    <title>Layout Invalidate Test</title>
    <link rel="stylesheet" type="text/css" href="../../plottable.css">
    <script src="../bower_components/d3/d3.min.js"></script>
    <script src="../../plottable.js"></script>
    <script src="../../examples/exampleUtil.js"></script>

    <script>
      var renderAreaD1;
      var basicTable;
      var title1;
      var legend1;
      var colorScale1;

      window.onload = function () {
          var svg = d3.select("#chart");
          svg.attr("width", 500).attr("height", 500);

          //data
          var dataseries1 = new Plottable.DataSource(makeNormallyDistributedData(50, 0, 1, 0, 1));
          dataseries1.metadata({name: "series1"});
          var dataseries2 = new Plottable.DataSource(makeRandomData(50));
          dataseries2.metadata({name: "series2"});
          colorScale1 = new Plottable.Scales.Color("10");
          colorScale1.domain(["series1", "series2"]);

          //Axis
          var xScale = new Plottable.Scales.Linear();
          var yScale = new Plottable.Scales.Linear();
          var xAxis = new Plottable.Axis.XAxis(xScale, "bottom");
          var yAxis = new Plottable.Axis.YAxis(yScale, "left");


          var colorProjector = function(d, i, m) {
             return colorScale1.scale(m.name);
          };

          //rendering
          renderAreaD1 = new Plottable.Plots.Scatter(dataseries1, xScale, yScale);
          renderAreaD2 = new Plottable.Plots.Line(dataseries2, xScale, yScale);
          renderAreaD1.project("fill", colorProjector);
          renderAreaD2.project("stroke", colorProjector);
          var renderAreas = renderAreaD1.merge(renderAreaD2);


          //title + legend
          title1 = new Plottable.Components.TitleLabel( "Two Data Series", "horizontal");
          legend1 = new Plottable.Components.Legend(colorScale1);
          var titleTable = new Plottable.Components.Table().addComponent(0,0, title1)
                                                .addComponent(0,1, legend1);

          basicTable = new Plottable.Components.Table().addComponent(0,2, titleTable)
                      .addComponent(1, 1, yAxis)
                      .addComponent(1, 2, renderAreas)
                      .addComponent(2, 2, xAxis)




          basicTable.renderTo(svg);


      };

      function button1Callback() {
          title1.setText("");
      }

      function button2Callback() {
          title1.setText("tiny");
      }

      function button3Callback() {
          title1.setText("abcdefghij klmnopqrs tuvwxyz ABCDEF GHIJK LMNOP QRSTUV WXYZ");
      }

      function button4Callback() {
          colorScale1.domain([]);
      }

      function button5Callback() {
          colorScale1.domain(["series1", "series2"]);
      }

      function button6Callback() {
          colorScale1.domain(["series1", "series2", "apples", "oranges", "bananas", "grapes"]);
      }
</script>
  </head>
  <body>
    <svg id="chart"></svg>
    <button onclick="button1Callback()">no title</button>
    <button onclick="button2Callback()">short title</button>
    <button onclick="button3Callback()">long title</button>
    <br>
    <button onclick="button4Callback()">no legend</button>
    <button onclick="button5Callback()">short legend</button>
    <button onclick="button6Callback()">tall legend</button>
  </body>

</html>
